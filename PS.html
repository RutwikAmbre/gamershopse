<!DOCTYPE html>
<!--
Author : Abdul Nafey
Student Number : 21116261
References : https://dev.to/sasigit7/displaying-content-on-the-webpage-using-a-local-json-file-2mpb

Developed in Apache Netbeans IDE 15
-->
<html lang="en">

<head>
  <title>PlayStation Page</title>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css"
    integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
  <link rel="stylesheet" href="games.css" />



</head>

<body class="abdul">
  <nav class="navbar navbar-expand-lg navbar-light bg-secondary">
    <a class="navbar-brand ml-auto" href="index.html"><img id="logo" src="images/gamershop_logo_white.png" /></a>
    <div class="collapse navbar-collapse" id="navbarNav">
      <ul id="navdetails" class="navbar-nav mx-auto">
        <li class="nav-item">
          <a id="navBtn" class="nav-link" href="index.html">Home <span class="sr-only">(current)</span></a>
        </li>
        <li class="nav-item">
          <a id="navBtn" class="nav-link" href="searchgame.html">Search</a>
        </li>
      </ul>
    </div>
  </nav>
  <hr />
  <h1>PlayStation Games</h1>
  <div class="output"></div>
  <script>
    "use strict";

    const output = document.querySelector(".output");
    //console.log(output); // <div class="output"></div>

    //output.textContent = "New Content";
    //console.log(output); // <div class="output">New content</div>

    // Storing json data in a variable
    const localJsonFile = "json/local.json";

    // The DOMContentLoaded event fires when the initial HTML document has been completely loaded and parsed,
    // without waiting for stylesheets, images, and subframes to finish loading.
    window.addEventListener("DOMContentLoaded", () => {
      // console.log('DOM fully loaded and parsed');
      output.textContent = "Please open this file with localhost";
      // Make fetch request to local.json file
      fetch(localJsonFile)
        .then((response) => response.json()) // and the response we get is in json format
        .then((data) => {
          // we call that data here
          // console.log(data); // check the data on the console
          output.innerHTML = ""; // Initial content is empty
          data.forEach((el) => {
            // loop through the json data using forEach method
            // console.log(el);
            jsonList(el); // calling jsonList function
          });
        });
    });

    // Create a function to display the json data dynamically on the webpage
    function jsonList(products) {
      // Create a new div element dynamically
      const div = document.createElement("div");
      // get the required details from the local.json file to the div element using innerHTML
      div.innerHTML = `
       Game Name: ${products.Name}
        <br>
       Game Details: ${products.Details}
        <br>
       Game Price: ${products.Price}`;
      // attach the newly created div element to the original div element, in this case to the class '.output'
      output.append(div);
      // Add styling to the displayed content
      div.classList.add("active1");
    }
  </script>
  <h2> Purchase the Game to Try it Out</h2>
  <!--List of Games section satrs here-->
  <section class="products" id="products">

    <div class="row">
      <div id="one" class="col-sm-4">
        <img alt="product" src="images/fifa.jpg" onclick="myFunction()">
        <br>
        <br>
        <a class="Buy buy-btt" id="killf" href="#">Buy</a>
      </div>


      <div id="one" class="col-sm-4">
        <img alt="product" src="images/cod.jpg" onclick="myFunction1()">
        <br>
        <br>
        <a class="Buy buy-btt" id="killf1" href="#">Buy</a>
      </div>



      <div id="one" class="col-sm-4">
        <img alt="product" src="images/gow.jpg" onclick="myFunction2()">
        <br>
        <br>
        <a class="Buy buy-btt" id="killf2" href="#">Buy</a>
      </div>


      <div id="one" class="col-sm-4">
        <img alt="product" src="images/nfs.jpg" onclick="myFunction3()">
        <br>
        <br>
        <a class="Buy buy-btt" id="killf3" href="#">Buy</a>
      </div>


      <div id="one" class="col-sm-4">
        <img alt="product" src="images/gran.jpg" onclick="myFunction4()">
        <br>
        <br>
        <a class="Buy buy-btt" id="killf4" href="#">Buy</a>
      </div>



      <div id="one" class="col-sm-4">
        <img alt="product" src="images/dirt5.jpg" onclick="myFunction5()">
        <br>
        <br>
        <a class="Buy buy-btt" id="killf5" href="#">Buy</a>
      </div>



      <div id="one" class="col-sm-4">
        <img alt="product" src="images/darq.jpg" onclick="myFunction6()">
        <br>
        <br>
        <a class="Buy buy-btt" id="killf6" href="#">Buy</a>
      </div>

      <div id="one" class="col-sm-4">
        <img alt="product" src="images/dying.jpg" onclick="myFunction7()">
        <br>
        <br>
        <a class="Buy buy-btt" id="killf7" href="#">Buy</a>
      </div>


      <div id="one" class="col-sm-4">
        <img alt="product" src="images/returnal.jpg" onclick="myFunction8()">
        <br>
        <br>
        <a class="Buy buy-btt" id="killf8" href="#">Buy</a>
      </div>

  </section>
  <script type="text/Javascript">
		// DOM event for buy buttons
        document.getElementById("killf").addEventListener("click",function(){
          window.location.href = "PaymentMethod.html";
            alert("Game Purchased Successfully");
            }); 
				
        document.getElementById("killf1").addEventListener("click",function(){
          window.location.href = "PaymentMethod.html";
            alert("Game Purchased Successfully");
            }); 
				
        document.getElementById("killf2").addEventListener("click",function(){
          window.location.href = "PaymentMethod.html";
            alert("Game Purchased Successfully");
            });

        document.getElementById("killf3").addEventListener("click",function(){
          window.location.href = "PaymentMethod.html";
            alert("Game Purchased Successfully");
            });

        document.getElementById("killf4").addEventListener("click",function(){
          window.location.href = "PaymentMethod.html";
            alert("Game Purchased Successfully");
            });

        document.getElementById("killf5").addEventListener("click",function(){
          window.location.href = "PaymentMethod.html";
            alert("Game Purchased Successfully");
            });

        document.getElementById("killf6").addEventListener("click",function(){
          window.location.href = "PaymentMethod.html";
            alert("Game Purchased Successfully");
            });

        document.getElementById("killf7").addEventListener("click",function(){
          window.location.href = "PaymentMethod.html";
            alert("Game Purchased Successfully");
            });

        document.getElementById("killf8").addEventListener("click",function(){
          window.location.href = "PaymentMethod.html";
            alert("Game Purchased Successfully");
            });

        document.getElementById("demo0").onclick = function() {myFunction()};

</script>
  <br>
  <!--Fetches customer support contact details stored on external server using API-->
  <h3> Contact PlayStation Customer Service </h3>
  <div id="targetDiv">
  </div>
  <button type="button" onclick="loadData('https://randomuser.me/api')">Fetch Customer Service Contact Details</button>
  <script>
    async function loadData(url) {
      var div = "<div>";
      var response = await fetch(url);
      var data = await response.json();

      div += "<div>Agent First Name: " + data["results"][0]["name"]["first"] + "</div>";
      div += "<div>Agent Last Name: " + data["results"][0]["name"]["last"] + "</div>";
      div += "<div>Agent Email: " + data["results"][0]["email"] + "</div>";
      div += "<div>Agent Location: " + data["results"][0]["location"]["country"] + "</div>";
      div += "</div>";

      document.getElementById("targetDiv").innerHTML = div;
    }
  </script>
  
            <footer class="py-3 my-4 ">
                <ul class="nav justify-content-center pb-3 mb-3">
                    <li class="nav-item bg-secondary border-top border-bottom border-left border-right">
                        <a href="index.html" class="nav-link">Home</a>
                    </li>
                     <li class="nav-item bg-secondary border-top border-bottom border-left border-right">
                        <a href="searchgame.html" class="nav-link">Search</a>
                    </li>
                    
                </ul>
            </footer>
</body>

</html>